@use './ResultCard.tokens.generated.scss';

.resultCard {
  transition: all 0.2s ease-in-out;
  cursor: pointer;
  overflow: hidden;

  .card {
    background: var(--result-card-background);
    border: 1px solid var(--result-card-border);
    border-radius: var(--result-card-border-radius);
    box-shadow: var(--result-card-shadow);
    transition: all 0.2s ease-in-out;
    padding: var(--result-card-padding);

    &:hover {
      box-shadow: var(--result-card-hover-shadow);
      border-color: var(--semantic-color-border-focus);
    }

    &.selected {
      border-color: var(--semantic-color-border-focus);
      background: var(--result-card-selected-background);
      box-shadow: var(--result-card-hover-shadow);
    }
  }

  .header {
    padding-bottom: var(--core-spacing-size-04);

    .headerContent {
      display: flex;
      align-items: center;
      gap: var(--result-card-gap);

      .sourceIcon {
        font-size: var(--core-icon-size-md);
        flex-shrink: 0;
      }

      .title {
        font-weight: var(--result-card-title-weight);
        font-size: var(--result-card-title-size);
        line-height: var(--semantic-typography-line-height-tight);
        color: var(--semantic-color-foreground-primary);
        flex: 1;
        min-width: 0;
      }

      .badge {
        margin-left: var(--core-spacing-size-04);
        flex-shrink: 0;
        font-size: var(--semantic-typography-caption-01);
      }
    }
  }

  .metadata {
    display: flex;
    align-items: center;
    gap: var(--result-card-gap);
    font-size: var(--semantic-typography-caption-01);
    color: var(--semantic-color-foreground-secondary);
    margin-bottom: var(--core-spacing-size-04);

    .confidenceScore {
      display: flex;
      align-items: center;
      gap: var(--core-spacing-size-02);

      &.high {
        color: var(--semantic-color-status-success);
      }

      &.medium {
        color: var(--semantic-color-status-warning);
      }

      &.low {
        color: var(--semantic-color-status-danger);
      }
    }

    .badgeGroup {
      display: flex;
      gap: var(--core-spacing-size-02);
    }

    .pathText {
      color: var(--semantic-color-foreground-tertiary);
      font-size: var(--semantic-typography-caption-02);
    }
  }

  .content {
    .contentPreview {
      position: relative;

      .previewBox {
        position: relative;
        padding: var(--core-spacing-size-04);
        background: var(--semantic-color-background-secondary);
        border-radius: var(--semantic-shape-radius-small);
        border: 1px solid var(--semantic-color-border-subtle);
      }

      .highlight {
        background: var(--semantic-color-background-highlight);
        padding: 2px 4px;
        border-radius: 2px;
      }

      .copyButton {
        position: absolute;
        top: var(--core-spacing-size-02);
        right: var(--core-spacing-size-02);
        opacity: 0;
        transition: opacity 0.2s ease-in-out;

        &.visible {
          opacity: 1;
        }
      }

      .copiedIndicator {
        position: absolute;
        top: var(--core-spacing-size-02);
        right: var(--core-spacing-size-08);
        background: var(--semantic-color-background-success-subtle);
        color: var(--semantic-color-foreground-success);
        padding: 2px 6px;
        border-radius: var(--semantic-shape-radius-small);
        font-size: var(--semantic-typography-caption-02);
      }

      .expandButton {
        margin-top: var(--core-spacing-size-04);
        color: var(--semantic-color-foreground-link);
      }
    }

    .separator {
      height: 1px;
      background: var(--semantic-color-border-subtle);
      margin: var(--core-spacing-size-04) 0;
    }

    .skeleton {
      display: flex;
      flex-direction: column;
      gap: var(--core-spacing-size-02);

      .skeletonLine {
        height: 16px;
        background: var(--semantic-color-background-secondary);
        border-radius: var(--semantic-shape-radius-small);
      }
    }

    .explanation {
      .explanationHeader {
        display: flex;
        align-items: center;
        gap: var(--core-spacing-size-02);
        margin-bottom: var(--core-spacing-size-04);

        .explanationIcon {
          color: var(--semantic-color-status-warning);
        }

        .explanationTitle {
          font-size: var(--semantic-typography-heading-06);
          font-weight: var(--semantic-typography-font-weight-medium);
          color: var(--semantic-color-foreground-primary);
        }
      }

      .explanationContent {
        .explanationText {
          color: var(--semantic-color-foreground-secondary);
          line-height: var(--semantic-typography-line-height-loose);
          margin-bottom: var(--core-spacing-size-04);
        }

        .insights {
          margin-bottom: var(--core-spacing-size-04);

          .insightsHeader {
            display: flex;
            align-items: center;
            gap: var(--core-spacing-size-02);
            margin-bottom: var(--core-spacing-size-02);

            .insightsIcon {
              color: var(--semantic-color-status-highlight);
            }

            .insightsTitle {
              font-weight: var(--semantic-typography-font-weight-medium);
              color: var(--semantic-color-foreground-primary);
            }
          }

          .insightsList {
            .insightItem {
              display: flex;
              align-items: flex-start;
              gap: var(--core-spacing-size-02);
              margin-bottom: var(--core-spacing-size-02);

              .insightBullet {
                color: var(--semantic-color-foreground-accent);
                font-weight: var(--semantic-typography-font-weight-bold);
              }
            }
          }
        }

        .actions {
          .actionsHeader {
            display: flex;
            align-items: center;
            gap: var(--core-spacing-size-02);
            margin-bottom: var(--core-spacing-size-02);

            .actionsIcon {
              color: var(--semantic-color-foreground-info);
            }

            .actionsTitle {
              font-weight: var(--semantic-typography-font-weight-medium);
              color: var(--semantic-color-foreground-primary);
            }
          }

          .actionsGrid {
            display: flex;
            flex-wrap: wrap;
            gap: var(--core-spacing-size-02);

            .actionButton {
              display: flex;
              align-items: center;
              gap: var(--core-spacing-size-02);
            }
          }
        }
      }
    }
  }

  .footer {
    padding: var(--core-spacing-size-04);
    background: var(--semantic-color-background-secondary);

    .footerContent {
      display: flex;
      justify-content: space-between;
      align-items: center;

      .tagGroup {
        display: flex;
        gap: var(--core-spacing-size-02);
        flex-wrap: wrap;

        .tag {
          font-size: var(--semantic-typography-caption-02);
        }

        .tagOverflow {
          font-size: var(--semantic-typography-caption-02);
          background: var(--semantic-color-background-tertiary);
        }
      }

      .footerMeta {
        display: flex;
        align-items: center;
        gap: var(--core-spacing-size-04);

        .lastUpdated {
          font-size: var(--semantic-typography-caption-02);
          color: var(--semantic-color-foreground-tertiary);
        }

        .viewButton {
          display: flex;
          align-items: center;
          gap: var(--core-spacing-size-02);
          color: var(--semantic-color-foreground-link);

          &:hover {
            color: var(--semantic-color-foreground-link-hover);
          }
        }
      }
    }
  }
}